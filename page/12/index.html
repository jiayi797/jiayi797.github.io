<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
<!-- Referrer Policy调整致不蒜子单页面统计出错:https://senorui.top/posts/c33f.html -->
<meta name="referrer" content="no-referrer-when-downgrade">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jiayi797.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content=".">
<meta property="og:type" content="website">
<meta property="og:title" content="甲乙小朋友的房子">
<meta property="og:url" content="http://jiayi797.github.io/about/page/12/index.html">
<meta property="og:site_name" content="甲乙小朋友的房子">
<meta property="og:description" content=".">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="jiayi797">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://jiayi797.github.io/about/page/12/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>甲乙小朋友的房子</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">甲乙小朋友的房子</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">甲乙小朋友很笨，但甲乙小朋友不会放弃</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://jiayi797.github.io/about/2017/05/04/Python-pandas%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jiayi797">
      <meta itemprop="description" content=".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="甲乙小朋友的房子">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/04/Python-pandas%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">pandas相关技巧</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-04 16:06:29" itemprop="dateCreated datePublished" datetime="2017-05-04T16:06:29+08:00">2017-05-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-12-17 15:42:00" itemprop="dateModified" datetime="2018-12-17T15:42:00+08:00">2018-12-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="用pandas求差集">用pandas求差集</h1>
<p>从df1中去除掉df2的内容</p>
<p>data={'id':[1,2,3]} data2={'id':[3,1,4]} df1=pd.DataFrame(data) df2=pd.DataFrame(data2) print df1 print df2 df3=df1[~df1['id'].isin(df2['id'])] print df3</p>
<h1 id="求某个时间区间的数据集">求某个时间区间的数据集</h1>
<p>tart_t='2016-04-05 00:00:00' end_t='2016-04-16 00:00:00' action.time=pd.to_datetime(action.time,format='%Y-%m-%d %H:%M:%S') starttime=pd.to_datetime(start_t,format='%Y-%m-%d %H:%M:%S') endtime=pd.to_datetime(end_t,format='%Y-%m-%d %H:%M:%S') action=action[(action.time&lt;endtime)&amp;(action.time&gt;=starttime)]</p>
<h1 id="dummies">dummies</h1>
<p>我理解get_dummies是将拥有不同值的变量转换为0/1数值。打个比方，小明有黄、红、蓝三种颜色的帽子，小明今天戴黄色帽子用1表示，红色帽子用2表示，蓝色帽子用3表示。但1、2、3数值大小本身是没有意义的，只是用于区分帽子的颜色，因此在实际分析时，需要将1、2、3转化为0、1，如下代码所示：</p>
<pre><code>import pandas as pd
xiaoming=pd.DataFrame([1,2,3],index=[&#39;yellow&#39;,&#39;red&#39;,&#39;blue&#39;],columns=[&#39;hat&#39;])
print(xiaoming)
hat_ranks=pd.get_dummies(xiaoming[&#39;hat&#39;],prefix=&#39;hat&#39;)
print(hat_ranks.head())

            hat
yellow    1
red       2
blue      3
        hat_1  hat_2  hat_3
yellow      1      0      0
red         0      1      0
blue        0      0      1</code></pre>
<h1 id="其它to-dataframe">其它to DataFrame</h1>
<h2 id="dict-to-dataframe">dict to DataFrame</h2>
<pre><code>pd.DataFrame(d.items())</code></pre>
<h1 id="fillna">fillna</h1>
<h2 id="用同组的均值填补">用同组的均值填补</h2>
<pre><code>&gt;&gt;&gt; df
  name  value
0    A      1
1    A    NaN
2    B    NaN
3    B      2
4    B      3
5    B      1
6    C      3
7    C    NaN
8    C      3
&gt;&gt;&gt; df[&quot;value&quot;] = df.groupby(&quot;name&quot;).transform(lambda x: x.fillna(x.mean()))
&gt;&gt;&gt; df
  name  value
0    A      1
1    A      1
2    B      2
3    B      2
4    B      3
5    B      1
6    C      3
7    C      3
8    C      3</code></pre>
<h1 id="ipython运行python">ipython运行python</h1>
<p>启动新的namespace运行： %run main.py</p>
<p>在原有的namespace运行：%run -i main.py</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://jiayi797.github.io/about/2017/05/04/java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-Object/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jiayi797">
      <meta itemprop="description" content=".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="甲乙小朋友的房子">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/04/java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-Object/" class="post-title-link" itemprop="url">java学习笔记3-Object（equal/hashCode/toString）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-04 11:47:33" itemprop="dateCreated datePublished" datetime="2017-05-04T11:47:33+08:00">2017-05-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-12-17 15:41:59" itemprop="dateModified" datetime="2018-12-17T15:41:59+08:00">2018-12-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="object特性">Object特性</h1>
<ul>
<li>所有类的超类</li>
<li>可以引用任何对象</li>
</ul>
<h1 id="equals方法">equals方法</h1>
<p><code>Object</code>类中的<code>equals</code>方法判断两对象是否有相同的<strong>引用</strong></p>
<h2 id="equals的重写">equals的重写</h2>
<p>在实际coding中，一般我们都会对<code>equals</code>方法进行重写，例:</p>
<ol type="1">
<li><p>对于超类<code>Employee</code>：</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object otherObject)</span></span>&#123;</span><br><span class="line">        <span class="comment">//如果otherObject与this是同一个引用</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span> == therObject) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果therObject为空</span></span><br><span class="line">        <span class="keyword">if</span>(therObject == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果类型不同</span></span><br><span class="line">        <span class="keyword">if</span>(getClass() != otherObject.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//现在我们已经确认了otherObject是一个非空的Employee对象</span></span><br><span class="line">        <span class="comment">//为了比较实例域，我们将otherObject转换为Employee类型</span></span><br><span class="line">        Employee other = (Employee) otherObject</span><br><span class="line"></span><br><span class="line">        <span class="comment">//检测实例域是否相等</span></span><br><span class="line">        <span class="keyword">return</span> name.equals(other.name)</span><br><span class="line">            &amp;&amp; salary == other.salary</span><br><span class="line">            &amp;&amp; hireDay.equals(other.hireDay);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>为了防止<code>this.name</code>或<code>this.hireDay</code>可能为<code>null</code>的情况，将最后一句改为：</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> Obejcts.equals(name,other.name)</span><br><span class="line">    &amp;&amp; salary == other.salary</span><br><span class="line">    &amp;&amp; Objects.equals(hireDay,other.hireDay);</span><br></pre></td></tr></table></figure></p>
<p><strong><code>Obejcts.equals(a,b)</code>运行过程</strong>：</p>
<ul>
<li>如果<code>a</code>和<code>b</code>都为<code>null</code>，则返回true</li>
<li>如果其中一个为<code>null</code>，返回false</li>
<li>如果都不为<code>null</code>，则调用<code>a.equals(b)</code></li>
</ul></li>
<li><p>对于<code>Employee</code>的子类<code>Manager</code></p></li>
</ol>
<p>在子类中定义<code>euqals</code>方法时，要首先调用超类的euqals，然后比较子类中的实例域。</p>
<pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Manager</span> <span class="keyword">extends</span> <span class="title">Employee</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object otherObject)</span></span>&#123;</span><br><span class="line">        <span class="comment">//先调用超类的equals方法，检验this与otherObject是否属于同一class</span></span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">super</span>.equals(otherObject)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        Manager other = (Manager) otherObejct;</span><br><span class="line">        <span class="keyword">return</span> bonus == other.bonus</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre>
<h2 id="equals方法的特性">equals方法的特性</h2>
<ul>
<li>自反性：若<code>x!=null</code>,则<code>x.equals(x)</code>应返回<code>true</code></li>
<li>对称性：<code>y.equals(x)</code>与<code>x.euqals(y)</code>应返回同样结果</li>
<li>传递性：若<code>x.equals(y)</code>返回<code>true</code>,且<code>y.equals(z)</code>返回<code>true</code>，则<code>x.equals(z)</code>也必须返回<code>true</code></li>
<li>一致性：若x与y的引用对象没有发生变化，则反复调用<code>x.equals(y)</code>应返回同样结果</li>
<li>对任意非空引用x，则<code>x.equals(null)</code>应该返回false</li>
</ul>
<h2 id="相等测试">相等测试</h2>
<p><strong>问题</strong> 如果隐式（this）和显式（传入的）的参数不属于同一类，equals方法如何处理？</p>
<p><strong>解决方法一</strong> 在上例中，我们用到了<code>getClass()</code>：</p>
<pre><code>  //如果类型不同
        if(getClass() != otherObject.getClass()) return false;</code></pre>
<p><strong>解决方法二</strong> 有的程序员喜欢用<code>instanceof</code>检测： (instanceof 运算符是用来在运行时指出对象是否是特定类的一个实例)</p>
<pre><code>if(!(otherObeject instanceof Employee)) return false;</code></pre>
<p><strong>方法一存在的问题</strong> 若<code>e</code>是一个<code>Employee</code>对象，<code>m</code>是一个<code>Manager</code>对象，且两者具有相同姓名、薪水和雇用日期。</p>
<p>如果<code>Manager</code>没有重新实现<code>equals</code>方法，那么当<code>m1.equals(m2)</code>比较时，就会使用到<code>e.getClass() != m2.getClass()</code>来进行比较，显然结果返回<code>false</code>，因此这不是正确的比较。</p>
<p><strong>方法二存在的问题</strong> 那么对于<code>e.equals(m)</code>来说，<code>instanceof</code>返回<code>true</code>.（<code>Manager</code>是<code>Employee</code>的一个实例） 但对于<code>m.equals(e)</code>来说，<code>instanceof</code>返回<code>false</code></p>
<p>！！！！！违反了对称性！</p>
<p><strong>总结</strong></p>
<ul>
<li>如果子类拥有自己的相等概念，例如若两个<code>Manager</code>对象的姓名、薪水和雇用日期（父类Employee的域）均相等，而奖金（子类Manager的域）不相等，就认为两个<code>Manager</code>不相等。此时可以用<code>getClass</code>检测</li>
<li>如果使用雇员ID(父类Employee的域)来作为相等检测标准，并这个标准适合所有的子类，就可以用<code>instanceof</code>检测，并将<code>Employee</code>的<code>equals</code>申明为<code>final</code></li>
</ul>
<p><strong>完美的equals</strong>：</p>
<pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object otherObject)</span></span>&#123;</span><br><span class="line">    <span class="comment">//检测this与otherObject是否引用同一对象</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>==otherObject)<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    <span class="comment">//检测otherObject是否为null</span></span><br><span class="line">    <span class="keyword">if</span>(otherObject == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="comment">//比较this与Object是否属于同一个类，有以下两种方案：</span></span><br><span class="line">    <span class="comment">//如果equals的语义在每个子类中都有改变，就用getClass:</span></span><br><span class="line">    <span class="keyword">if</span>(getClass() != otherObject.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="comment">//如果所有子类都有统一equals语义，则用instanceof检测：</span></span><br><span class="line">    <span class="keyword">if</span>(!(otherObject <span class="keyword">instanceof</span> ClassName)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="comment">//将otherObject转换为相应的类类型</span></span><br><span class="line">    ClassName other = (ClassName) otherObject</span><br><span class="line">    <span class="comment">//对所需要的域进行比较</span></span><br><span class="line">    <span class="keyword">return</span> field1 == other.field1 </span><br><span class="line">        &amp;&amp; field2 == other.field2</span><br><span class="line">        &amp;&amp; Objects.equals(field3,other field3)</span><br><span class="line">        &amp;&amp; ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre>
<p><strong>注意</strong>：如果在子类中重新定义<code>equals</code>，则要在其中包含调用<code>super.equals(other)</code></p>
<h1 id="hashcode方法">hashCode方法</h1>
<p>hashCode : 散列码</p>
<p>使用：</p>
<pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> hash = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; lenth() ; i++ )&#123;</span><br><span class="line">    hash = <span class="number">31</span> * hash + charAt(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre>
<p><strong>注意</strong></p>
<ul>
<li>每个对象都有一个<em>默认的散列码</em>，值为对象的<em>存储地址</em></li>
<li>字符串的散列码是由内容导出的，因此<code>s</code>和<code>t</code>有相同hashcode</li>
<li>如果重新定义了equals方法，就必须重新定义hashCode方法，且通过equal测试的两个对象的hashCode应该也是相等的，以便用户可以将对象插入到散列表中</li>
<li>hashCode方法应该返回一个整型数值，并使得不同对象的hashCode更均匀。</li>
</ul>
<p>例如：</p>
<pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">7</span> * name.hashCode()</span><br><span class="line">            + <span class="number">11</span> * <span class="keyword">new</span> Double(salary).hashCode()</span><br><span class="line">            + <span class="number">13</span> * hireDay.hashCode();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre>
<p>更方便的方法：</p>
<pre><code><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(name,salary,hireDay);</span><br><span class="line">    &#125;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># toString方法</span><br><span class="line"></span><br><span class="line">用途：返回表示对象值的字符串</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line"></span><br><span class="line">    ```<span class="function">Java</span></span><br><span class="line"><span class="function">    <span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getClass().getName()</span><br><span class="line">            + <span class="string">&quot;[name=&quot;</span> + name</span><br><span class="line">            + <span class="string">&quot;,salary=&quot;</span> + salary</span><br><span class="line">            + <span class="string">&quot;,hireDay=&quot;</span> + hireDay</span><br><span class="line">            +<span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></code></pre>
<p>特别地：</p>
<ol type="1">
<li>只要对象与一个字符串通过操作符“+”连接起来，或使用System.out.println(x)，Java编译就会自动调用toString方法。</li>
<li>Object类定义了toString方法，用来打印输出对象所属的类名和散列码。</li>
<li>有趣的是，数组继承了object类的toString方法。修正的方法是采用Array.toString.例如<code>String s = Array.toString(luckyNumbers)</code>。多维数组需要调用<code>Array.deepToString</code>方法。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://jiayi797.github.io/about/2017/04/28/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6-xgboost%E5%8F%82%E6%95%B0%E8%B0%83%E8%8A%82%E6%8C%87%E5%8D%97%EF%BC%88Python%E7%89%88%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jiayi797">
      <meta itemprop="description" content=".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="甲乙小朋友的房子">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/28/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6-xgboost%E5%8F%82%E6%95%B0%E8%B0%83%E8%8A%82%E6%8C%87%E5%8D%97%EF%BC%88Python%E7%89%88%EF%BC%89/" class="post-title-link" itemprop="url">机器学习框架-xgboost参数调节指南（Python版）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-28 17:16:11" itemprop="dateCreated datePublished" datetime="2017-04-28T17:16:11+08:00">2017-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-12-17 15:42:00" itemprop="dateModified" datetime="2018-12-17T15:42:00+08:00">2018-12-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">机器学习框架</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文大多来自于参考文献2.的翻译。</p>
<h1 id="xgboost参数">Xgboost参数</h1>
<p>XGBoost作者将参数分为3类：</p>
<ol type="1">
<li>基本(General)参数：指导整体函数</li>
<li>提升(Booster)参数：在每一步指导每个提升（树或回归）</li>
<li>学习任务(Learning Task Parameters)参数：指导优化模型表现</li>
</ol>
<h2 id="基本参数">基本参数</h2>
<h3 id="booster">booster</h3>
<ol type="1">
<li>默认值：gbtree</li>
<li>含义：在每次迭代中的模型类型，有两种选择：</li>
</ol>
<ul>
<li>gbtree:树模型</li>
<li>gblinear:线性模型</li>
</ul>
<h3 id="silent">silent</h3>
<ol type="1">
<li>默认值：0</li>
<li>含义</li>
</ol>
<ul>
<li>0=运行时打印running messages</li>
<li>1=不打running messages</li>
</ul>
<h3 id="nthread">nthread</h3>
<ol type="1">
<li>运行时的最大线程数</li>
<li>默认值：占当前计算机的最大线程</li>
</ol>
<h2 id="提升参数">提升参数</h2>
<p>这里仅仅介绍树模型（gbtree）的相关参数。</p>
<h3 id="eta">eta</h3>
<ol type="1">
<li>学习步长</li>
<li>default=0.3</li>
<li>一般调整下限为0.01-0.2</li>
</ol>
<h3 id="min_child_weight">min_child_weight</h3>
<ol type="1">
<li>表示所有孩子节点(all observations required in a child)的最小权重和</li>
<li>一般都用来控制过拟合。</li>
<li>但如果调得太高就会导致欠拟合。</li>
<li>default=1</li>
</ol>
<h3 id="max_depth">max_depth</h3>
<ol type="1">
<li>default=6</li>
<li>用来控制过拟合</li>
<li>一般在3-10之间</li>
</ol>
<h3 id="gamma">gamma</h3>
<ol type="1">
<li>default=0</li>
<li>range: [0,∞]</li>
<li>模型在默认情况下，对于一个节点的划分只有在其损失函数得到结果大于0的情况下才进行，而gamma给定了所需的最低损失函数的值</li>
<li>gamma值使得算法更conservation，且其值依赖于损失函数，在模型中应该进行调参。</li>
</ol>
<h3 id="max_delta_step">max_delta_step</h3>
<ol type="1">
<li>default=0</li>
<li>在最大化步长的时候，我们允许每个树的权重去估算它。</li>
<li>当max_delta_step=0时，意味着没有误差</li>
<li>当max_delta_step&gt;0时，意味着结果更保守</li>
<li>一般不需要调参。但当类别及不平衡的逻辑回归时可能会用到。</li>
</ol>
<h3 id="subsample-default1">subsample [default=1]</h3>
<p>Same as the subsample of GBM. Denotes the fraction of observations to be randomly samples for each tree. Lower values make the algorithm more conservative and prevents overfitting but too small values might lead to under-fitting. Typical values: 0.5-1</p>
<h3 id="colsample_bytree-default1">colsample_bytree [default=1]</h3>
<p>Similar to max_features in GBM. Denotes the fraction of columns to be randomly samples for each tree.</p>
<p>Typical values: 0.5-1 ### colsample_bylevel [default=1] Denotes the subsample ratio of columns for each split, in each level. I don’t use this often because subsample and colsample_bytree will do the job for you. but you can explore further if you feel so.</p>
<h3 id="lambda-default1">lambda [default=1]</h3>
<p>L2 regularization term on weights (analogous to Ridge regression) This used to handle the regularization part of XGBoost. Though many data scientists don’t use it often, it should be explored to reduce overfitting.</p>
<h3 id="alpha-default0">alpha [default=0]</h3>
<p>L1 regularization term on weight (analogous to Lasso regression) Can be used in case of very high dimensionality so that the algorithm runs faster when implemented</p>
<h3 id="scale_pos_weight-default1">scale_pos_weight [default=1]</h3>
<p>A value greater than 0 should be used in case of high class imbalance as it helps in faster convergence. Control the balance of positive and negative weights, useful for unbalanced classes. A typical value to consider: sum(negative cases) / sum(positive cases) See Parameters Tuning for more discussion. Also see Higgs Kaggle competition demo for examples: R, py1, py2, py3</p>
<p>控制正负样本权重的平衡。一般对非平衡的很有用。一个很特殊的取值是：负样本个数/正样本个数。</p>
<h3 id="不均衡数据在xgboost中的处理">不均衡数据在xgboost中的处理</h3>
<p><a target="_blank" rel="noopener" href="https://github.com/dmlc/xgboost/blob/master/doc/how_to/param_tuning.md">官方文档</a>:</p>
<p>对于一些case，比如：广告点击日志，数据集极不平衡。这会影响xgboost模型的训练，有两个方法来改进它。</p>
<p>如果你关心的预测的ranking order（AUC)： – 通过scale_pos_weight来平衡正负类的权重 – 使用AUC进行评估</p>
<p>如果你关心的是预测的正确率： – 不能再平衡（re-balance）数据集 – 将参数max_delta_step设置到一个有限的数（比如：1）可以获得效果提升.</p>
<h2 id="学习任务参数">学习任务参数</h2>
<h3 id="objective-defaultreglinear">objective [default=reg:linear]</h3>
<ol type="1">
<li>default=reg:linear</li>
<li>定义学习任务及相应的学习目标，可选的目标函数如下：</li>
</ol>
<ul>
<li>“reg:linear” –线性回归。</li>
<li>“reg:logistic” –逻辑回归。</li>
<li>“binary:logistic” –二分类的逻辑回归问题，输出为概率。</li>
<li>“binary:logitraw” –二分类的逻辑回归问题，输出的结果为wTx。</li>
<li>“count:poisson” –计数问题的poisson回归，输出结果为poisson分布。在poisson回归中，max_delta_step的缺省值为0.7。(used to safeguard optimization)</li>
<li>“multi:softmax” –让XGBoost采用softmax目标函数处理多分类问题，同时需要设置参数num_class（类别个数）</li>
<li>“multi:softprob” –和softmax一样，但是输出的是ndata * nclass的向量，可以将该向量reshape成ndata行nclass列的矩阵。没行数据表示样本所属于每个类别的概率。</li>
<li>“rank:pairwise” –set XGBoost to do ranking task by minimizing the pairwise loss</li>
<li>​</li>
</ul>
<h3 id="eval_metric">eval_metric</h3>
<ol type="1">
<li>默认值根据objective参数调整</li>
<li>用来验证数据的参数</li>
<li>几个典型值：</li>
</ol>
<ul>
<li>rmse – root mean square error</li>
<li>mae – mean absolute error</li>
<li>logloss – negative log-likelihood</li>
<li>error – Binary classification error rate (0.5 threshold)</li>
<li>merror – Multiclass classification error rate</li>
<li>mlogloss – Multiclass logloss</li>
<li>auc: Area under the curve</li>
</ul>
<h3 id="seed-default0">seed [default=0]</h3>
<p>The random number seed. Can be used for generating reproducible results and also for parameter tuning.</p>
<h1 id="例ctr问题的正样本过少">例：CTR问题的正样本过少</h1>
<p>参考文献[xgboost导读和实战]</p>
<p>《xgboost导读和实战》中提到，CTR问题的正样本很稀疏，根据理论推导，会导致叶子节点权重变大，进而导致每一步的估计step过大。</p>
<p>这时可以调节以下参数：</p>
<p><code>min_child_weight</code></p>
<p>默认为1.是每个叶子里h的和至少是多少。对正负样本不均衡时的0-1分类而言，假设h在0.01附近，min_child_weight为1意味着叶子节点中最少需要包含100 个样本。这个参数非常影响结果，控制叶子节点中二阶导的和的最小值，该参数值越小，越容易 overfitting。</p>
<p><code>eta</code> shrinkage 参数，用于更新叶子节点权重时，乘以该系数，避免步长过大。参数值越大，越可能无法收敛。把学习率eta设置的小一些，小学习率可以使得后面的学习更加仔细。</p>
<p><code>scale_pos_weight</code> 如果优化的是仅仅展示排序，就是AUC的话，可以采用平衡正负样本权重的 办法调大正样本权重。设置 scale_pos_weight就可以把正样本权重乘这个系数。如果还需要优化回归的性能，还需要在此基础上做下 recalibration。</p>
<p><code>max_delta_step</code> 如果设立了该值，对叶子节点的权重值做了约束在 [max_delta_step,max_delta_step]。以防在某些 loss 下权重值过大，默认是 0（其实代表 inf)。可以试试把这个参数设置到 1-10 之间的一个值。这样会防止做太大的更新步子， 使得更新更加平缓。</p>
<h1 id="交叉验证">交叉验证</h1>
<p>xgboost自带的交叉验证据说很好用。</p>
<p>下面是参考文献3给出的一个使用案例：</p>
<pre><code>cvresult = xgb.cv(xgb_param, 
                    xgtrain, num_boost_round=alg.get_params()[&#39;n_estimators&#39;],
                    nfold=cv_folds,
                    metrics=&#39;auc&#39;, early_stopping_rounds=early_stopping_rounds, show_progress=False)</code></pre>
<p>其中： - xgb_params：参数 - xgtrain:训练集 - num_boost_round：树个数（迭代次数） - nfold:kfold的k - metrics:在CV中的评价度量指标 - early_stopping_rounds：Activates early stopping. CV error needs to decrease at least every <early_stopping_rounds> round(s) to continue. Last entry in evaluation history is the one from best iteration.</p>
<h1 id="参考文献">参考文献</h1>
<ol type="1">
<li>《xgboost导读和实战》</li>
<li><a target="_blank" rel="noopener" href="http://wepon.me/2016/05/07/XGBoost%E6%B5%85%E5%85%A5%E6%B5%85%E5%87%BA/">Xgboost深入浅出</a></li>
<li><a target="_blank" rel="noopener" href="https://www.analyticsvidhya.com/blog/2016/03/complete-guide-parameter-tuning-xgboost-with-codes-python/">Complete Guide to Parameter Tuning in XGBoost (with codes in Python)</a></li>
<li><a target="_blank" rel="noopener" href="http://xgboost.readthedocs.io/en/latest/parameter.html">xgboost参数官方文档</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.csdn.net/u010657489/article/details/51952785">XGBoost参数调优完全指南（附Python代码）</a></li>
<li><a target="_blank" rel="noopener" href="http://d0evi1.com/sklearn/imbalanced_classes/">如何处理偏斜类(imbalanced classes)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/dmlc/xgboost/blob/master/doc/parameter.md">XGBoost Parameters</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://jiayi797.github.io/about/2017/04/25/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%B7%B5-O2O%E4%BC%98%E6%83%A0%E5%88%B8%E9%A2%84%E6%B5%8B-%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jiayi797">
      <meta itemprop="description" content=".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="甲乙小朋友的房子">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/25/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%B7%B5-O2O%E4%BC%98%E6%83%A0%E5%88%B8%E9%A2%84%E6%B5%8B-%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/" class="post-title-link" itemprop="url">机器学习实践-O2O优惠券预测-特征工程 机器学习实践-O2O优惠券预测-特征工程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-25 14:32:40" itemprop="dateCreated datePublished" datetime="2017-04-25T14:32:40+08:00">2017-04-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-12-17 15:42:01" itemprop="dateModified" datetime="2018-12-17T15:42:01+08:00">2018-12-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/o2o%E4%BC%98%E6%83%A0%E5%88%B8%E4%BD%BF%E7%94%A8%E9%A2%84%E6%B5%8B/" itemprop="url" rel="index"><span itemprop="name">o2o优惠券使用预测</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="特征工程">特征工程</h1>
<h2 id="别人的例子">别人的例子</h2>
<p><img src="http://jiayi797.oss-cn-beijing.aliyuncs.com/2017-04-25-16-54-35.png" /> <img src="http://jiayi797.oss-cn-beijing.aliyuncs.com/2017-04-25-16-54-53.png" /></p>
<h2 id="特征选择">特征选择</h2>
<p>特征选择，就是从多个特征中，挑选出一些对结果预测最有用的特征。因为原始的特征中可能会有冗余和噪声。 特征选择和降维有什么区别呢？前者只踢掉原本特征里和结果预测关系不大的， 后者做特征的计算组合构成新特征。</p>
<h3 id="过滤型">过滤型</h3>
<ul>
<li>方法：  评估单个特征和结果值之间的相关程度， 排序留下Top相关的特征部分。</li>
<li>评价方式：Pearson相关系数， 互信息， 距离相关度。</li>
<li>缺点：只评估了单个特征对结果的影响，没有考虑到特征之间的关联作用， 可能把有用的关联特征误踢掉。因此工业界使用比较少。</li>
<li>python包：SelectKBest指定过滤个数、SelectPercentile指定过滤百分比。</li>
</ul>
<h3 id="包裹型">包裹型</h3>
<ul>
<li>方法：把特征选择看做一个特征子集搜索问题， 筛选各种特 征子集， 用模型评估效果。</li>
<li>典型算法：“递归特征删除算法”。</li>
<li>应用在逻辑回归的过程：用全量特征跑一个模型；根据线性模型的系数(体现相关性)，删掉5-10%的弱特征，观察准确率/auc的变化；逐步进行， 直至准确率/auc出现大的下滑停止。</li>
<li>python包：RFE</li>
</ul>
<h3 id="嵌入型">嵌入型</h3>
<ul>
<li>方法：根据模型来分析特征的重要性，最常见的方式为用正则化方式来做特征选择。</li>
<li>举例：最早在电商用LR做CTR预估， 在3-5亿维的系数特征上用L1正则化的LR模型。上一篇介绍了L1正则化有截断作用，剩余2-3千万的feature， 意味着其他的feature重要度不够。</li>
<li>python包：feature_selection.SelectFromModel选出权重不为0的特征。</li>
</ul>
<h1 id="参考文献">参考文献</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://ask.julyedu.com/question/7114">四月机器学习算法班—特征工程笔记</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://jiayi797.github.io/about/2017/04/14/linux%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jiayi797">
      <meta itemprop="description" content=".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="甲乙小朋友的房子">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/14/linux%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">linux常见命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-14 16:07:04" itemprop="dateCreated datePublished" datetime="2017-04-14T16:07:04+08:00">2017-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-12-17 15:41:59" itemprop="dateModified" datetime="2018-12-17T15:41:59+08:00">2018-12-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="io">IO</h1>
<h2 id="linuxwindows互传">linux/windows互传</h2>
<p>需要安装：yum install -y lrzsz</p>
<p>从Windows上传文件<code>[root@localhost src]# rz</code> 从Linux下载文件<code>sz nginx-1.6.2.tar.gz</code></p>
<h2 id="linux互传">linux互传</h2>
<ol type="1">
<li>从服务器下载文件 scp username@servername:/path/filename /tmp/local_destination 例如scp codinglog@192.168.0.101:/home/kimi/test.txt 把192.168.0.101上的/home/kimi/test.txt的文件下载到 /tmp/local_destination</li>
<li>上传本地文件到服务器 scp /path/local_filename username@servername:/path<br />
例如scp /var/www/test.php codinglog@192.168.0.101:/var/www/ 把本机/var/www/目录下的test.php文件上传到192.168.0.101这台服务器上的/var/www/目录中</li>
<li>从服务器下载整个目录 scp -r username@servername:remote_dir/ /tmp/local_dir 例如:scp -r codinglog@192.168.0.101 /home/kimi/test /tmp/local_dir</li>
<li>上传目录到服务器 scp -r /tmp/local_dir username@servername:remote_dir 例如：scp -r test codinglog@192.168.0.101:/var/www/把当前目录下的test目录上传到服务器的/var/www/目录</li>
</ol>
<h1 id="文件夹">文件夹</h1>
<p>新建文件夹<code>mkdir name</code></p>
<h1 id="杂絮">杂絮</h1>
<p>查看硬盘情况<code>df -h</code> 合并文件<code>cat *.csv  &gt; full.csv</code> 查看文件<code>$ ps -ef | grep 关键字</code></p>
<h1 id="解压">解压</h1>
<h2 id="批量解压.zip">批量解压.zip</h2>
<p>两种方式：（经测试第一种好用）</p>
<pre><code>ls *.zip | xargs -n1 unzip
unzip &quot;*.zip&quot;</code></pre>
<h2 id="批量解压.tar.gz">批量解压.tar.gz</h2>
<pre><code>ls *.tar.gz | xargs -n1 tar xzvf    </code></pre>
<h1 id="vim">vim</h1>
<p><code>i</code>——进入插入模式 <code>ESC+:wq!</code>：保存，退出 <code>ESC+:q!</code>：不保存，退出</p>
<h1 id="vnc-tiger">VNC-tiger</h1>
<p>安装： <a target="_blank" rel="noopener" href="http://www.jianshu.com/p/35640fc5672b">CentOs 7安装配置VNC Server</a> <a target="_blank" rel="noopener" href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-remote-access-for-the-gnome-desktop-on-centos-7">digitalOcean,How to install vncserver in centos 7</a></p>
<p>使用：</p>
<p>help:<code>vncserver -help</code> 开启：<code>vncserver :1</code> 按照一定比例输出（屏幕旋转）：<code>vncserver 900x1440 :1</code> 停止：<code>vncserver -kill: 1</code> 临时文档：<code>/tmp/.X11-unix</code>.</p>
<h1 id="用sublime搭建简单的python">用sublime搭建简单的python</h1>
<p>安装 Python，安装时选择添加路径到系统中，或者稍后自己添加也可 随便写个 demo，Ctrl + B 就可以运行了</p>
<p><a target="_blank" rel="noopener" href="http://docs.sublimetext.info/en/latest/getting_started/install.html?highlight=ln">sublime官方文档</a> <a target="_blank" rel="noopener" href="https://www.zhihu.com/question/22904994">各路方法</a></p>
<p>中文无法输入问题解决<a target="_blank" rel="noopener" href="http://www.jianshu.com/p/bf05fb3a4709">解决Ubuntu下Sublime Text 3无法输入中文</a> <a target="_blank" rel="noopener" href="http://www.brightempty.com/?p=91">装python包</a></p>
<h1 id="nohup">nohup</h1>
<pre><code>nohup command &gt; nohup.out &amp;</code></pre>
<p>nohup相关： 将nohup后面的<code>command</code>设置成后台运行，并且将标准输出的日志重定向至文件nohup.out。 查看运行状态：jobs 查看日志内容：tail -f nohup.out (ctrl + c 退出查看) 查看进程信息： ps -ef |grep java ps -ef | grep rm 停止运行 kill %n 很好的参考文献：http://blog.sina.com.cn/s/blog_90546d6f0101en9y.html</p>
<h1 id="更改某个目录的权限">更改某个目录的权限</h1>
<pre><code>chown -R -v ubuntu:ubuntu info</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://jiayi797.github.io/about/2017/04/05/Python-python%E5%AE%9E%E7%8E%B0%E6%9F%90%E7%BD%91%E7%AB%99%E8%87%AA%E5%8A%A8%E6%89%93%E5%8D%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jiayi797">
      <meta itemprop="description" content=".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="甲乙小朋友的房子">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/05/Python-python%E5%AE%9E%E7%8E%B0%E6%9F%90%E7%BD%91%E7%AB%99%E8%87%AA%E5%8A%A8%E6%89%93%E5%8D%A1/" class="post-title-link" itemprop="url">python实现某网站自动打卡</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-05 15:16:14" itemprop="dateCreated datePublished" datetime="2017-04-05T15:16:14+08:00">2017-04-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-12-17 15:42:00" itemprop="dateModified" datetime="2018-12-17T15:42:00+08:00">2018-12-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近学校出了个科学上网的小网站，但流量有限，可以通过每天打卡来获取几十兆流量。奈何自己记性很差，总忘记打卡。因此决定写一个自动打卡的小程序。</p>
<h1 id="思路总结">思路总结</h1>
<ol type="1">
<li>用抓包工具仔细分析下登陆以及回帖时post了哪些数据，这些数据从何而来（chrome）</li>
<li>python requests库，用requests.Session().post来登陆和回帖，用get来读取页面内容；</li>
<li>登陆之后，正则找到“签到”或"不能签到"，来进行下一步</li>
<li>若能签到，就发出签到URL的请求（因为链接从原来上来说是一种URL）</li>
<li>记录每次签到的log</li>
<li>最后的最后，使用写个.sh脚本，里面运行这个python程序，配置个相应的plist，每天自动执行（MAC OS）</li>
</ol>
<h1 id="模拟登陆原理">模拟登陆原理</h1>
<h2 id="浏览器访问服务器的过程">浏览器访问服务器的过程</h2>
<p>一次完整的HTTP请求过程从TCP三次握手建立连接成功后开始。</p>
<ol type="1">
<li>用户发起请求（点击等）</li>
<li>浏览器向WEB服务器发出一个请求<strong>Http Request（请求）</strong></li>
<li>Web服务器发相应<strong>Http Response</strong></li>
<li>浏览器解析</li>
</ol>
<h2 id="http消息">HTTP消息</h2>
<p>更多关于HTTP请求过程，见参考资料<a target="_blank" rel="noopener" href="https://foofish.net/http-request-process.html">一次完整的HTTP请求过程</a></p>
<p>HTTP 是一种无状态的协议,协议本身不保留之前的一切请求信息和响应信息，也就是说，对于一个刚刚发送了 HTTP 请求的客户端再次发起请求时，服务端并不知道之前访问过。这样设计的理由是为了更快地处理大量事务，确保协议的可伸缩性，而特意把 HTTP 协议设计如此简单。 但是，无状态导致业务处理就变得棘手了，一个简单的例子就是网上购物的时候，当我在一个页面把商品加入购物车的时候，正当我要跳转到支付页面时，如果没有一种机制来保持我的登录状态，那么之前选的商品全部丢失了。 因此，为了在无状态的HTTP协议之上维护会话状态，使服务器可以知道当前是和哪个客户端打交道，于是Cookie技术应运而生，Cookie通俗的理解就是服务端分配给客户端的一个标识。</p>
<h2 id="cookie原理">Cookie原理</h2>
<p>Cookie原理其实也非常简单，总共4个步骤维护HTTP会话。 <img src="http://jiayi797.oss-cn-beijing.aliyuncs.com/2017-04-05-15-55-17.png" /> 1. 浏览器第一次发起HTTP请求时，没有携带任何Cookie信息，服务器收到请求并返回给浏览器的HTTP响应，同时HTTP响应包括了一个响应头Set-Cookie字段，它的值是要设置的Cookie。 2. 浏览器收到来自服务器的HTTP响应，响应头中发现有Set-Cookie字段，就会将该字段的值保存在内存或者硬盘中。 3. 浏览器下次给该服务器发送HTTP请求时，会将Cookie信息附加在HTTP请求的头字段Cookie中。 4. 服务器收到这个HTTP请求，发现请求头中有Cookie字段，便知道之前就和这个用户打过交道了。</p>
<p>理解了Cookie的基本原理之后，我们就可以尝试用Python来实现模拟登录。</p>
<h1 id="点击登陆后究竟发生了什么">点击登陆后，究竟发生了什么？</h1>
<p>为了看看浏览器究竟做了什么，我们首先进入登录界面，随便输入一个密码，点击登录。打开Chrome开发者工具条(F12)。选择Network下的Headers： <img src="http://jiayi797.oss-cn-beijing.aliyuncs.com/2017-04-05-16-12-54.png" /></p>
<p>从上图我们可以发现以下关键信息： 1. 登陆的URL地址是General下面的Request URL的那个。 2. 登录需要提供的表单（Form Data）有三个，email(用户名),passwd（密码）,remember_me(就是那个“记住我”的选项，我们可以从它的html中搜索得出，如下图)。 <img src="http://jiayi797.oss-cn-beijing.aliyuncs.com/2017-04-05-16-20-21.png" /></p>
<p>到这里，基本上摸清了浏览器登录时所需要的数据是如何获取的了，那么现在就可以开始撸代码用Python模拟浏览器来登录。</p>
<p>由于我今天登陆的网站实在是太简易了，也不需要分析header就可以登陆。所以此处省略header的分析。</p>
<p>我打算基于python的requests库来完成这一过程。</p>
<h1 id="python实现模拟登陆">python实现模拟登陆</h1>
<pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">email=<span class="string">&#x27;jiayi797@163.com&#x27;</span></span><br><span class="line">password=<span class="string">&#x27;这里加密了&#x27;</span></span><br><span class="line">loginurl = <span class="string">&#x27;https://ssr.0v0.loan/auth/login&#x27;</span></span><br><span class="line"><span class="comment"># 这行代码，是用来维持cookie的，你后续的操作都不用担心cookie，他会自动带上相应的cookie</span></span><br><span class="line">s = requests.Session()</span><br><span class="line"><span class="comment"># 我们需要带表单的参数</span></span><br><span class="line">loginparams=&#123;<span class="string">&#x27;email&#x27;</span>:email,<span class="string">&#x27;passwd&#x27;</span>:password,<span class="string">&#x27;remember_me&#x27;</span>:<span class="string">&#x27;ture&#x27;</span>&#125;</span><br><span class="line"><span class="comment"># post 数据实现登录</span></span><br><span class="line">r = s.post(loginurl,data=loginparams)</span><br><span class="line"><span class="comment"># 验证是否登陆成功，抓取首页看看内容</span></span><br><span class="line">r = s.get(loginurl)</span><br></pre></td></tr></table></figure></code></pre>
<p>运行完这些后，我们发现r已经有内容了。接下来我们进行自动签到。</p>
<h1 id="签到">签到</h1>
<p>我们查看r._content的内容，是主页的html内容。很长。为了方便分析，我只拿出“签到”标签下的内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box box-primary&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box-header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-pencil&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;box-title&quot;</span>&gt;</span>签到获取流量<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- /.box-header --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box-body&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span> 每24小时可以签到一次。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>上次签到时间：<span class="tag">&lt;<span class="name">code</span>&gt;</span>2017-04-04 17:11:22<span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;checkin-btn&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;checkin&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success  btn-flat&quot;</span>&gt;</span>签到<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;checkin-msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- /.box-body --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /.box --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /.col (right) --&gt;</span></span><br></pre></td></tr></table></figure>
<p>需要注意的还有以下这个脚本：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">&quot;#checkin&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">                <span class="attr">url</span>: <span class="string">&quot;/user/checkin&quot;</span>,</span><br><span class="line">                <span class="attr">dataType</span>: <span class="string">&quot;json&quot;</span>,</span><br><span class="line">                <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">                    $(<span class="string">&quot;#checkin-msg&quot;</span>).html(data.msg);</span><br><span class="line">                    $(<span class="string">&quot;#checkin-btn&quot;</span>).hide();</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">error</span>: <span class="function"><span class="keyword">function</span> (<span class="params">jqXHR</span>) </span>&#123;</span><br><span class="line">                    alert(<span class="string">&quot;发生错误：&quot;</span> + jqXHR.status);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>从脚本中我们读到，签到的类型是post，url是/user/checkin， 因此我们试一下post一个这样的url会有什么后果。</p>
<pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">checkinUrl=<span class="string">&quot;https://ssr.0v0.loan/user/checkin&quot;</span></span><br><span class="line">r=s.post(checkinUrl)<span class="comment">#执行签到</span></span><br><span class="line">r = s.get(loginurl)<span class="comment">#查看签到结果</span></span><br></pre></td></tr></table></figure></code></pre>
<p>我们发现，签到栏的HTML已经变成了；</p>
<pre><code><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-6&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box box-primary&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box-header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-pencil&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;box-title&quot;</span>&gt;</span>签到获取流量<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- /.box-header --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box-body&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span> 每24小时可以签到一次。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>上次签到时间：<span class="tag">&lt;<span class="name">code</span>&gt;</span>2017-04-05 14:08:02<span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-success btn-flat disabled&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>不能签到<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;checkin-msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- /.box-body --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /.box --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /.col (right) --&gt;</span></span><br></pre></td></tr></table></figure></code></pre>
<p>即：</p>
<pre><code>&lt;button id=&quot;checkin&quot; class=&quot;btn btn-success  btn-flat&quot;&gt;签到&lt;/button&gt;</code></pre>
<p>变成了：</p>
<pre><code>&lt;a class=&quot;btn btn-success btn-flat disabled&quot; href=&quot;#&quot;&gt;不能签到&lt;/a&gt;</code></pre>
<p>大题框架搭完了。接下来要做的就是一些细节。</p>
<h1 id="判断是否已签到">判断是否已签到</h1>
<p>接下来要做的就是用正则，找到“签到”或者“不能签到”的对应标签，来获得一个当前状态。</p>
<p>首先我想到的是最简单的方式，用python自带的<code>re.search()</code>。</p>
<pre><code><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check</span>(<span class="params"><span class="built_in">str</span></span>):</span></span><br><span class="line">    hasCheckIn=<span class="string">&#x27;&lt;button id=&quot;checkin&quot; class=&quot;btn btn-success  btn-flat&quot;&gt;&#x27;</span></span><br><span class="line">    noChecked=<span class="string">&#x27;&lt;a class=&quot;btn btn-success btn-flat disabled&quot; href=&quot;#&quot;&gt;&#x27;</span></span><br><span class="line">    yes=re.search(hasCheckIn,<span class="built_in">str</span>)</span><br><span class="line">    <span class="keyword">if</span> yes==<span class="literal">None</span>:</span><br><span class="line">        no=re.search(noChecked,<span class="built_in">str</span>)</span><br><span class="line">        <span class="keyword">if</span> no==<span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span> <span class="comment">#什么都没找到</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span><span class="comment">#找到了“不能签到”</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span><span class="comment">#找到了“签到”</span></span><br></pre></td></tr></table></figure></code></pre>
<h1 id="获取当前流量">获取当前流量</h1>
<p>先找到流量的对应标签：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">&quot;dl-horizontal&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>总流量<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>1.53GB<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>已用流量<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>253.36MB<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>剩余流量<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>1.29GB<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>想要获取标签内的内容（而不是暴力地匹配字符串），我们就需要用到另一种匹配方式——正则表达式</p>
<p>举个例子，我们想要获取<a href></a>之间的内容，那么我们可以这么写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#正则表达式获取&lt;tr&gt;&lt;/tr&gt;之间内容  </span></span><br><span class="line">res_tr = <span class="string">r&#x27;&lt;tr&gt;(.*?)&lt;/tr&gt;&#x27;</span>  </span><br><span class="line">m_tr =  re.findall(res_tr,language,re.S|re.M)  </span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> m_tr:  </span><br><span class="line">    <span class="built_in">print</span> line  </span><br><span class="line">    <span class="comment">#获取表格第一列th 属性  </span></span><br><span class="line">    res_th = <span class="string">r&#x27;&lt;th&gt;(.*?)&lt;/th&gt;&#x27;</span>    </span><br><span class="line">    m_th = re.findall(res_th,line,re.S|re.M)  </span><br><span class="line">    <span class="keyword">for</span> mm <span class="keyword">in</span> m_th:  </span><br><span class="line">        <span class="built_in">print</span> unicode(mm,<span class="string">&#x27;utf-8&#x27;</span>),  <span class="comment">#unicode防止乱  </span></span><br><span class="line">    <span class="comment">#获取表格第二列td 属性值  </span></span><br><span class="line">    res_td = <span class="string">r&#x27;&lt;td&gt;(.*?)&lt;/td&gt;&#x27;</span>  </span><br><span class="line">    m_td = re.findall(res_td,line,re.S|re.M)  </span><br><span class="line">    <span class="keyword">for</span> nn <span class="keyword">in</span> m_td:  </span><br><span class="line">        <span class="built_in">print</span> unicode(nn,<span class="string">&#x27;utf-8&#x27;</span>)  </span><br></pre></td></tr></table></figure>
<p>其中，res是匹配模式。 <code>r’</code>是匹配模式的开头， <code>&lt;tr</code>是先匹配字符串<code>&lt;tr</code> <code>.</code>是匹配任意字符，除了换行符 <code>*</code>是匹配0个或多个的表达式 <code>?</code>是匹配0个或1个由前面的正则表达式定义的片段，非贪婪方式 依次类推</p>
<p><code>re.S</code>使<code>.</code>匹配包括换行在内的所有字符 <code>re.M</code>:多行匹配，影响 ^ 和 $</p>
<p>因此，我们的思路是，匹配<code>&lt;dt&gt;总流量&lt;/dt&gt;</code>到<code>&lt;/dd&gt;&lt;/dl&gt;</code>之间的内容。</p>
<p>改写以上匹配式子为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">match_flows</span>(<span class="params"><span class="built_in">str</span></span>):</span></span><br><span class="line">    res = <span class="string">r&#x27;&lt;dl class=&quot;dl-horizontal&quot;&gt;(.*?)&lt;/dl&gt;&#x27;</span></span><br><span class="line">    mm = re.findall(</span><br><span class="line">        res, <span class="built_in">str</span>, re.S | re.M)</span><br><span class="line">    res=<span class="string">r&#x27;&lt;dd&gt;(.*?)&lt;/dd&gt;&#x27;</span></span><br><span class="line">    mm= re.findall(</span><br><span class="line">        res, mm[<span class="number">0</span>], re.S | re.M)</span><br><span class="line">    <span class="keyword">return</span> mm</span><br></pre></td></tr></table></figure>
<h1 id="记录当前操作">记录当前操作</h1>
<p>首先</p>
<pre><code>import logging</code></pre>
<p>然后：</p>
<pre><code># 配置日志文件和日志级别
logging.basicConfig(filename=&#39;logger.log&#39;, level=logging.INFO)

nowtime=time.strftime(&#39;%Y-%m-%d&#39;,time.localtime(time.time()))#获取当前时间
str= nowtime+&#39;,\t总流量：&#39;+lastFlows[0]+&#39;,\t已用流量：&#39;+lastFlows[1]+&#39;,\t剩余流量：&#39;+lastFlows[2]
logging.info(str)#写入日志</code></pre>
<h1 id="操作系统定期执行python脚本">操作系统定期执行Python脚本</h1>
<p>见参考文献4.</p>
<h1 id="全部代码">全部代码</h1>
<pre><code> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 配置日志文件和日志级别</span></span><br><span class="line">logging.basicConfig(filename=<span class="string">&#x27;logger.log&#x27;</span>, level=logging.INFO)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check</span>(<span class="params"><span class="built_in">str</span></span>):</span></span><br><span class="line">    hasCheckIn=<span class="string">&#x27;&lt;button id=&quot;checkin&quot; class=&quot;btn btn-success  btn-flat&quot;&gt;&#x27;</span></span><br><span class="line">    noChecked=<span class="string">&#x27;&lt;a class=&quot;btn btn-success btn-flat disabled&quot; href=&quot;#&quot;&gt;&#x27;</span></span><br><span class="line">    yes=re.search(hasCheckIn,<span class="built_in">str</span>)</span><br><span class="line">    <span class="keyword">if</span> yes==<span class="literal">None</span>:</span><br><span class="line">        no=re.search(noChecked,<span class="built_in">str</span>)</span><br><span class="line">        <span class="keyword">if</span> no==<span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span> <span class="comment">#什么都没找到</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span><span class="comment">#找到了“不能签到”</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span><span class="comment">#找到了“签到”</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">match_flows</span>(<span class="params"><span class="built_in">str</span></span>):</span></span><br><span class="line">    res = <span class="string">r&#x27;&lt;dl class=&quot;dl-horizontal&quot;&gt;(.*?)&lt;/dl&gt;&#x27;</span></span><br><span class="line">    mm = re.findall(</span><br><span class="line">        res, <span class="built_in">str</span>, re.S | re.M)</span><br><span class="line">    res=<span class="string">r&#x27;&lt;dd&gt;(.*?)&lt;/dd&gt;&#x27;</span></span><br><span class="line">    mm= re.findall(</span><br><span class="line">        res, mm[<span class="number">0</span>], re.S | re.M)</span><br><span class="line">    <span class="keyword">return</span> mm</span><br><span class="line">    <span class="comment">## 这段代码是用于解决中文报错的问题</span></span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(<span class="string">&quot;utf8&quot;</span>)</span><br><span class="line">email=<span class="string">&#x27;你的账号&#x27;</span></span><br><span class="line">password=<span class="string">&#x27;你的密码&#x27;</span></span><br><span class="line">loginurl = <span class="string">&#x27;https://ssr.0v0.loan/auth/login&#x27;</span></span><br><span class="line"><span class="comment"># 这行代码，是用来维持cookie的，你后续的操作都不用担心cookie，他会自动带上相应的cookie</span></span><br><span class="line">s = requests.Session()</span><br><span class="line"><span class="comment"># 我们需要带表单的参数</span></span><br><span class="line">loginparams=&#123;<span class="string">&#x27;email&#x27;</span>:email,<span class="string">&#x27;passwd&#x27;</span>:password,<span class="string">&#x27;remember_me&#x27;</span>:<span class="string">&#x27;ture&#x27;</span>&#125;</span><br><span class="line"><span class="comment"># post 数据实现登录</span></span><br><span class="line">r = s.post(loginurl,data=loginparams)</span><br><span class="line"><span class="comment"># 验证是否登陆成功，抓取首页看看内容</span></span><br><span class="line">r = s.get(loginurl)</span><br><span class="line">res=check(r.content)<span class="comment">#0=不能签到;1=可以签到;-1=什么都没找到;</span></span><br><span class="line"><span class="keyword">if</span>(res==<span class="number">1</span>):<span class="comment">#可以签到</span></span><br><span class="line">    checkinUrl=<span class="string">&quot;https://ssr.0v0.loan/user/checkin&quot;</span></span><br><span class="line">    r=s.post(checkinUrl)</span><br><span class="line">    r = s.get(loginurl)</span><br><span class="line">lastFlows=match_flows(r.content)</span><br><span class="line">nowtime=time.strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>,time.localtime(time.time()))<span class="comment">#获取当前时间</span></span><br><span class="line"><span class="built_in">str</span>= nowtime+<span class="string">&#x27;,\t总流量：&#x27;</span>+lastFlows[<span class="number">0</span>]+<span class="string">&#x27;,\t已用流量：&#x27;</span>+lastFlows[<span class="number">1</span>]+<span class="string">&#x27;,\t剩余流量：&#x27;</span>+lastFlows[<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span> <span class="built_in">str</span></span><br><span class="line">logging.info(<span class="built_in">str</span>)</span><br></pre></td></tr></table></figure></code></pre>
<h1 id="参考文献">参考文献</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="http://geek.csdn.net/news/detail/189850">微信群分享：用Python模拟知乎自动登录</a></li>
<li><a target="_blank" rel="noopener" href="http://www.runoob.com/python/python-reg-expressions.html">Python正则表达式</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.csdn.net/eastmount/article/details/51082253">常用正则表达式爬取网页信息及分析HTML标签总结</a></li>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/thingk/p/4309122.html">操作系统定期定时执行PYTHON脚本</a></li>
</ol>
<p>签到成功后：</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://jiayi797.github.io/about/2017/04/04/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E8%BF%9B%E9%98%B6-%E3%80%8AImproving-Regressors-Using-Boosting-Techniques%E3%80%8B%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jiayi797">
      <meta itemprop="description" content=".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="甲乙小朋友的房子">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/04/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E8%BF%9B%E9%98%B6-%E3%80%8AImproving-Regressors-Using-Boosting-Techniques%E3%80%8B%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">《Improving Regressors Using Boosting Techniques》论文笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-04 20:12:45" itemprop="dateCreated datePublished" datetime="2017-04-04T20:12:45+08:00">2017-04-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-12-17 15:42:00" itemprop="dateModified" datetime="2018-12-17T15:42:00+08:00">2018-12-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E8%BF%9B%E9%98%B6/" itemprop="url" rel="index"><span itemprop="name">机器学习进阶</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="introduction部分">introduction部分</h1>
<p><strong>Bagging和boosting用途</strong></p>
<p>Bagging和boosting主要是用多重预测来解决以下两个问题： 1. 在回归问题中获取最小误差； 2. 在分类问题中获取最小错误率。</p>
<p><strong>Bagging和Boosting共性</strong> 都是通过训练不同的数据集来得到回归模型。</p>
<p><strong>不同点</strong></p>
<p><strong>bagging</strong> 1. 从<span class="math inline">\(N_1\)</span>个原始样本中，有放回地抽样(可能overlap)得到<span class="math inline">\(N_1\)</span>个样本 2. 独立训练模型 3. 得到不同的预测 4. 求所有预测的平均得到最终结果</p>
<p>由于模型之间独立，因此可以对训练过程采取分布式或并行的方式。</p>
<p><strong>boosting</strong></p>
<p>模型是依次训练出来的。</p>
<ol type="1">
<li>从训练集中挑出<span class="math inline">\(N_1\)</span>个样本，训练出第一个模型</li>
<li>挑出误差最大的样本</li>
<li>增大这些样本在下次被抽到的概率</li>
<li>再次进行训练，最终得到多个模型</li>
<li>最终对模型进行不同权重的加权，权重公式如下定义：</li>
</ol>
<p>设已知训练集<span class="math inline">\((y_i,x_i),i=1,...,N_1\)</span>。其中，<span class="math inline">\(x\)</span>是<span class="math inline">\(M\)</span>维的向量，且<span class="math inline">\((y_i,x_i)\)</span>唯一但未知(fixed but unknown) 我们将预测函数表示为<span class="math inline">\(y^{(p)}(x)\)</span>，则：</p>
<p><strong>sample modeling error</strong>: <span class="math display">\[PE=\frac{1}{N_2}\sum_{i=1}^{N_2}[y_i-y_i^{(p)}(x_i)]^2\]</span> <strong>prediction error</strong>: <span class="math display">\[ME=\frac{1}{N_2}\sum_{i=1}^{N_2}[y_i^{(t)}-y_i^{(p)}(x_i)]^2\]</span></p>
<p>其中， <span class="math inline">\(y_i^{(p)}(x_i)\)</span>表示第<span class="math inline">\(i\)</span>个测试集的预测值 <span class="math inline">\(y_i\)</span>表示第<span class="math inline">\(i\)</span>个测试集的观测值 <span class="math inline">\(y^{(t)}_i\)</span>是实际值 <span class="math inline">\(y^{(p)}(x)\)</span>的参数p是从<span class="math inline">\(N_2\)</span>个测试集的观测值中获得的，但是上面的累加的式子中的<span class="math inline">\(y_i\)</span>和<span class="math inline">\(x_i\)</span>是从从未被seen过的测试集的观测值<span class="math inline">\(N_2\)</span>获得的。</p>
<ol start="6" type="1">
<li></li>
</ol>
<p>看到这里突然发现有点跑偏了。决定先暂停这篇论文的研究。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://jiayi797.github.io/about/2017/04/04/%E5%A2%9E%E5%BC%BA%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jiayi797">
      <meta itemprop="description" content=".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="甲乙小朋友的房子">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/04/%E5%A2%9E%E5%BC%BA%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">增强学习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-04 17:00:47" itemprop="dateCreated datePublished" datetime="2017-04-04T17:00:47+08:00">2017-04-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-12-17 15:42:07" itemprop="dateModified" datetime="2018-12-17T15:42:07+08:00">2018-12-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/deep-learning/" itemprop="url" rel="index"><span itemprop="name">deep learning</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>增强学习</p>
<p>机器学习中的一个领域，关注智能体如何基于环境而采取一系列的行动，以取得最大化的预期利益或回报</p>
<p>特点</p>
<p>试错学习(Trail-and-error)，由于没有直接的指导信息，智能体要以不断与环境进行交互，通过试错的方式来获得最佳策略。</p>
<p>延迟回报，增强学习的指导信息很少，而且往往是在事后（最后一个状态）才给出的，这就导致了一个问题，就是获得正回报或者负回报以后，如何将回报分配给前面的状态。</p>
<p>例子</p>
<p>比如下象棋，每一步都是一个决策过程，但决策的结果事后才知道 再比如机器人的行走，移动过程中不知道如何挪动 一种可行的思路是设计一个回报函数，每执行一步决策后，向agent进行汇报，比如四足机器人，如果他向前走了一步（接近目标），那么回报函数为正，后退为负。这样，我们对每一步进行评价，得到相应的回报函数，我们只需要找到一条回报值最大的路径（每步的回报之和最大），就认为是最佳的路径。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://jiayi797.github.io/about/2017/04/03/ACM-2017%E8%85%BE%E8%AE%AF%E9%A2%98%E2%80%94%E2%80%94%E5%AD%97%E7%AC%A6%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E8%BE%93%E5%87%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jiayi797">
      <meta itemprop="description" content=".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="甲乙小朋友的房子">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/03/ACM-2017%E8%85%BE%E8%AE%AF%E9%A2%98%E2%80%94%E2%80%94%E5%AD%97%E7%AC%A6%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E8%BE%93%E5%87%BA/" class="post-title-link" itemprop="url">2017腾讯题——字符十六进制输出</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-03 21:24:29" itemprop="dateCreated datePublished" datetime="2017-04-03T21:24:29+08:00">2017-04-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-12-17 15:41:58" itemprop="dateModified" datetime="2018-12-17T15:41:58+08:00">2018-12-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index"><span itemprop="name">ACM</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="题目">题目</h1>
<p>编写代码，接收从屏幕输入的长度为16字节整数倍的字符串。回车后，按实例格式排版输出。</p>
<p>实例：</p>
<p>屏幕输入（均为可见字符）： abcdefghigklmnopqrstuvwxyzabcdefghigklmnopqrstuvwxyzabcdefghigkl</p>
<p><img src="http://jiayi797.oss-cn-beijing.aliyuncs.com/2017-04-03-21-24-41.png" /></p>
<h1 id="代码">代码</h1>
<pre><code>#include &lt;iostream&gt;
#include&lt;cstring&gt;
#include&lt;cstdio&gt;
using namespace std;
int main()
&#123;
    //freopen(&quot;in.txt&quot;,&quot;r&quot;,stdin);
    char c[16];
    int count=0;
    int level=0;
    int temp=0;
    char in;
    while(true)&#123;
        c[count]=getchar();
        if(c[count]==-1)&#123;
            break;
        &#125;
        if(count==16)&#123;
            printf(&quot;%08d&quot;,level*10);
            printf(&quot;  &quot;);
            for(int i=0;i&lt;16;i++)&#123;
                if(i==8)&#123;
                    printf(&quot; &quot;);
                &#125;
                temp=c[i]+16*level;
                printf(&quot;%02X&quot;,c[i]);
                printf(&quot; &quot;);
            &#125;
            printf(&quot; &quot;);
            for(int i=0;i&lt;16;i++)&#123;
                std::cout&lt;&lt;c[i];
            &#125;
            printf(&quot;\n&quot;);
            ++level;
            count=0;
        &#125;
        ++count;
    &#125;
    return 0;
&#125;</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://jiayi797.github.io/about/2017/04/03/ACM-BUPT-2017-F-Simple-recursion/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jiayi797">
      <meta itemprop="description" content=".">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="甲乙小朋友的房子">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/03/ACM-BUPT-2017-F-Simple-recursion/" class="post-title-link" itemprop="url">BUPT_ACM_2017_F_Simple_recursion</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-03 13:53:01" itemprop="dateCreated datePublished" datetime="2017-04-03T13:53:01+08:00">2017-04-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2018-12-17 15:41:58" itemprop="dateModified" datetime="2018-12-17T15:41:58+08:00">2018-12-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index"><span itemprop="name">ACM</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>本文是2017年北京邮电大学第十一届程序设计竞赛网络热身赛的F. Simple recursion题解。</p>
<h1 id="题目">题目</h1>
<p>题目描述 r_clover shows you a BIIIIIIIIIIG water problem: if <span class="math inline">\(f(0)=1,f(1)=1\)</span>,<span class="math inline">\(f(n)=2f(n-1)+3f(n-2)\)</span>, what is <span class="math inline">\(f(n)mod1000000007\)</span>?</p>
<p>输入格式 A single integer n(0≤n≤10000000000).</p>
<p>输出格式 A single integer, which is the answer for f(n)mod1000000007.</p>
<p>输入样例 10 输出样例 29525</p>
<h1 id="思路">思路</h1>
<p>一开始想的是用递归。但经测试发现递归的时间、空间复杂度都太高，导致超时。</p>
<p>正确打开方式：求出递推关系，并用快速幂取模方法计算结果。</p>
<h1 id="递推关系求解">递推关系求解</h1>
<p>《组合数学》内容————常系数线性齐次递推关系的求解。公式见后面的附1。 求解题目中所给的递推关系： <span class="math display">\[f(n)=2f(n-1)+3f(n-2)\]</span> <span class="math display">\[f(0)=1,f(1)=1\]</span> 它的特征方程为： <span class="math display">\[x^2-2x-3=0\]</span> 解方程得： <span class="math display">\[x_1=3,x_2=-1\]</span> 所以递推关系的通解为： <span class="math display">\[f(n)=c_13^n+c_2(-1)^n\]</span> 代入初值<span class="math inline">\(f(0)=1,f(1)=1\)</span>，得到： <span class="math display">\[f(0)=c_1+c_2=1\]</span> <span class="math display">\[f(1)=3c_1-c_2=1\]</span> 解得:<span class="math inline">\(c_1=c_2=0.5\)</span> 因此该递推关系的解为<span class="math display">\[f(n)=0.5(3)^n+0.5(-1)^n\]</span></p>
<p>代码实现：</p>
<pre><code><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">f</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> n,<span class="keyword">int</span> modNum)</span></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> a=<span class="number">3</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> b=<span class="number">1</span>;</span><br><span class="line">    a= <span class="built_in">quick_algorithm</span>(a,n,modNum);<span class="comment">//(a的n次方)mod(modNum),是快速求幂取模的方法，详细见后面的推导</span></span><br><span class="line">    <span class="keyword">if</span>(n%<span class="number">2</span>==<span class="number">1</span>)&#123;</span><br><span class="line">        b=<span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    a=<span class="number">0.5</span>*a+<span class="number">0.5</span>*b;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre>
<h1 id="常系数线性齐次递归关系的求解">常系数线性齐次递归关系的求解</h1>
<p><strong>递推关系：</strong></p>
<p><span class="math display">\[f(n)=c_1f(n-1)+c_2f(n-2)+...+c_kf(n-k)\]</span></p>
<p><strong>递推关系的特征方程</strong>：</p>
<p><span class="math display">\[x^k-c_1x^{k-1}-c_2x^{k-2}-...-c_k=0\]</span></p>
<p><strong>递归关系的特征根：</strong></p>
<p>特征方程的k个根（可能重根）：<span class="math display">\[q_1,q_2,...,q_k\]</span></p>
<p><strong>递归关系的特解：</strong></p>
<p>设q是非零复数，则<span class="math inline">\(f(n)=q^n\)</span>是递推关系的解，当且仅当q是它的特征根。</p>
<p><strong>递归关系的通解：</strong></p>
<p>设<span class="math inline">\(q_1,q_2,...,q_k\)</span>是递推关系的k个互不相等的特征根，则 <span class="math display">\[f(n)=b_1q_1^n+b_2q_2^n+b_3q_3^n+...+b_kq_k^n\]</span>是递推关系的通解。</p>
<h1 id="快速大数幂运算">快速大数幂运算</h1>
<p>这是一种很神奇的方法。</p>
<p>首先引入一些基础知识。</p>
<p><strong>幂取模运算的一个性质</strong></p>
<p><span class="math display">\[(a\times b)mod(c)=(((a)mod(c))\times ((b) mod(c)))mod(c)\]</span></p>
<p><strong>大数幂运算</strong> 核心思想：将大数的幂运算拆解成了相对应的乘法运算，利用上面的式子，始终将我们的运算的数据量控制在c的范围以下。</p>
<p>对于目标： <span class="math display">\[a^bmodc\]</span> 我们将b表示为二进制： <span class="math display">\[b=b_0+b_12+b_22^2+...+b_n2^n\]</span> 那么， <span class="math display">\[a^b=a^b_1\times a^{b_22^2} \times a^{b_32^3} \times ... \times a^{b_n2^n}\]</span> 其中<span class="math inline">\(b_k\)</span>要么为0，要么为1 去掉所有的0后，我们得到 <span class="math display">\[a^b=a^{b_k2^k} \times ... \times a^{b_n2^n}\]</span> 上式的模可以表示为： <span class="math display">\[a^b mod c =a^{b_k2^k} mod c\times ... \times a^{b_n2^n}mod c\]</span> 易发现： <span class="math display">\[A_k=a^{b_k2^k} mod c\]</span> <span class="math display">\[...\]</span> <span class="math display">\[A_n=a^{b_n2^n} mod c\]</span></p>
<p>即：<span class="math inline">\(A(n)\)</span>是<span class="math inline">\(A(n-1)\)</span>的平方倍！</p>
<p>实现：</p>
<pre><code><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">quick</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">1</span>;   <span class="comment">//记录结果</span></span><br><span class="line">    a=a%c;   <span class="comment">//预处理，使得a处于c的数据范围之下</span></span><br><span class="line">    <span class="keyword">while</span>(b!=<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(b&amp;<span class="number">1</span>) ans=(ans*a)%c;   <span class="comment">//如果b的二进制位不是0，那么我们的结果是要参与运算的</span></span><br><span class="line">        b&gt;&gt;=<span class="number">1</span>;    <span class="comment">//二进制的移位操作，相当于每次除以2，用二进制看，就是我们不断的遍历b的二进制位</span></span><br><span class="line">        a=(a*a)%c;   <span class="comment">//不断的加倍</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre>
<h1 id="代码">代码</h1>
<pre><code>#include &lt;iostream&gt;
#include&lt;cstdio&gt;
#include&lt;cmath&gt;
#include&lt;cstdlib&gt;
#include&lt;cstring&gt;
#include&lt;string&gt;
#include&lt;algorithm&gt;
#include &lt;math.h&gt;
using namespace std;
long quick_algorithm(long long a,long long n,int modNum)&#123;
    a=a%modNum ;
    long long ans=1 ;
    //这里我们不需要考虑b&lt;0，因为分数没有取模运算
    while(n!=0)&#123;
        if(n&amp;1)
            ans=(ans*a)%modNum ;
        n&gt;&gt;=1  ;
        a=(a*a)%modNum;
    &#125;
    return ans;
&#125;
long set2(long long n,int modNum)&#123;
    long long a=3;
    long long b=1;
    /*for(long long i=0;i&lt;n;i++)&#123;
        a=a*3;
        a=a%modNum;
    &#125;*/
    a= quick_algorithm(a,n,modNum);
    if(n%2==1)&#123;
        b=-1;
    &#125;
    //a=a;
    a=0.5*a+0.5*b;
    return a;
&#125;

int main()
&#123;
    int modNum=1000000007;
    long long input=999999999;
    scanf(&quot;%lld&quot;,&amp;input);
    if(input==0||input==1)&#123;
        printf(&quot;%lld\n&quot;,1);
    &#125;else&#123;
        long long out=set2(input,modNum);
        printf(&quot;%lld\n&quot;,out);
    &#125;
    return 0;
&#125;</code></pre>
<h1 id="参考文献">参考文献</h1>
<ol type="1">
<li>《组合数学引论》</li>
</ol>
<p>附上本题的艰辛史。 <img src="http://jiayi797.oss-cn-beijing.aliyuncs.com/2017-04-03-13-55-57.png" /></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/11/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/13/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">jiayi797</p>
  <div class="site-description" itemprop="description">.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">150</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jiayi797</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
    <span class="post-count">| 博客共334.5k字</span>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
